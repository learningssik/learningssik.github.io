<h3><a href="{{ '/' | relative_url }}" class="site-title">{{ site.title }}</a></h3>

<!-- Navigation Menu -->
<nav class="main-nav">
  <ul class="nav-list">
    {%- for item in site.navigation -%}
      <li class="nav-item">
        <a href="{{ item.url | relative_url }}" class="nav-link">{{ item.title }}</a>
      </li>
    {%- endfor -%}
  </ul>
</nav>


<nav class="sidebar-nav">
  <ul>
    <li>
      <details class="nav-section" open>
        <summary>개발</summary>
        <ul>
          {%- comment -%} 1. Collect root posts and sub-folders {%- endcomment -%}
          {%- assign root_posts = "" | split: "" -%}
          {%- assign sub_folders = "" | split: "" -%}
          {%- for post in site.public -%}
            {%- assign path_parts = post.dir | split: '/' -%}
            {%- if path_parts.size <= 2 -%}
              {%- assign root_posts = root_posts | push: post -%}
            {%- else -%}
              {%- assign folder = path_parts[2] -%}
              {%- assign sub_folders = sub_folders | push: folder -%}
            {%- endif -%}
          {%- endfor -%}
          {%- assign sub_folders = sub_folders | uniq | sort -%}

          {%- comment -%} 2. Print root posts {%- endcomment -%}
          {%- for post in root_posts -%}
            <li><a href="{{ post.url | relative_url }}">{{ post.title }}</a></li>
          {%- endfor -%}

          {%- comment -%} 3. Print folders and their posts {%- endcomment -%}
          {%- for folder in sub_folders -%}
            <li>
              <details class="nav-section" open>
                <summary>{{ folder }}</summary>
                <ul>
                  {%- for post in site.public -%}
                    {%- assign post_folder = post.dir | split: '/' | last -%}
                    {%- if post_folder == folder -%}
                      <li><a href="{{ post.url | relative_url }}">{{ post.title }}</a></li>
                    {%- endif -%}
                  {%- endfor -%}
                </ul>
              </details>
            </li>
          {%- endfor -%}
        </ul>
      </details>
    </li>
  </ul>
</nav>
